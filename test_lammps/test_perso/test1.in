clear
# ----------------------- VARIABLES DEFINITION -----------------------
variable name string Test_perso_1

# ------------------------ INITIALIZATION ----------------------

units 		lj
dimension	3
boundary	p	p	f
atom_style	sphere


# ----------------------- SYSTEM DEFINITION -----------------------
region		    boxreg block 0 20 0 20 0 20
create_box	    1 boxreg


comm_modify vel yes


#  ---------------------- ATOM DEFINITION -------------------------

#create_atoms	1 region boxreg 

fix 1 all nve/sphere
fix 2 all gravity 1.0 vector 0 0 -1

fix insertion all pour 10 1 1234 region boxreg
#FIX id groupID "ajout" nb type randSeed REGION regionID


comm_modify vel yes

fix 3 all wall/gran granular hertz/material 1e5 1e3 0.3 tangential mindlin NULL 1.0 0.5 zplane 0 NULL

# ------------------------ FORCE FIELDS -----------------------
pair_style	granular
pair_coeff      1 * jkr 1000.0 50.0 0.3 10 tangential mindlin 800.0 1.0 0.5 rolling sds 500.0 200.0 0.5 twisting marshall
#pair_coeff * * hooke 1000.0 50.0 tangential linear_history 500.0 1.0 0.4 damping mass_velocity

#--------------------------- OUTPUT SETTINGS ----------------------------
#compute csym all centro/atom fcc
#compute eng all pe/atom 
#compute eatoms all reduce sum c_eng
#compute strs all stress/atom

#----------------------Run Minimization-------------------------
# reset_timestep	0
timestep 0.001

thermo_style    custom step cpu atoms ke
thermo_modify   lost warn
thermo 100
#thermo_style custom step pe lx ly lz press pxx pyy pzz c_eatoms 

#dump 1 all custom 10 dump.comp.* id type xs ys zs c_csym c_eng c_strs[1] c_strs[2] c_strs[3]
#dump     1 all custom 250 dump.comp.* id type xs ys zs c_csym fx fy fz

dump     1 all custom 500 ${name}.dump id type mass radius xs ys zs 

#min_style cg
#minimize 1e-15 1e-15 5000 5000


run     20000

print "All done"
