clear
# ----------------------- VARIABLES DEFINITION -----------------------
variable name string dump_laser


# ------------------------ INITIALIZATION ----------------------

units 		metal
dimension	3
boundary	p   p   f
atom_style	sphere


# ----------------------- SYSTEM DEFINITION -----------------------
region		    mainbox block 0 100 0 100 0 50
create_box	    1 mainbox


comm_modify vel yes


#Â  ---------------------- ATOM DEFINITION -------------------------


fix 1 all nve/sphere
fix 2 all gravity 1.0 vector 0 0 -1

fix insertion all pour 1000 1 1234 region mainbox
#FIX id groupID "ajout" nb type randSeed REGION regionID


comm_modify vel yes

#fix walls all wall/gran/region granular hertz/material 1e5 1e3 0.3 tangential mindlin NULL 1.0 0.5 rolling sds 500.0 200.0 0.5 twisting marshall region mainbox
fix Zwall all wall/gran granular hertz/material 1e5 1e3 0.3 tangential mindlin NULL 1.0 0.5 zplane 0 NULL
#fix Xwall all wall/gran granular hertz/material 1e5 1e3 0.3 tangential mindlin NULL 1.0 0.5 zplane 0 NULL
#fix Ywall all wall/gran granular hertz/material 1e5 1e3 0.3 tangential mindlin NULL 1.0 0.5 zplane 0 NULL

# ------------------------ FORCE FIELDS -----------------------
pair_style	granular
pair_coeff * * hooke 1000.0 50.0 tangential linear_history 500.0 1.0 0.4 damping mass_velocity

#--------------------------- OUTPUT SETTINGS ----------------------------
#compute csym all centro/atom fcc
#compute eng all pe/atom 
#compute eatoms all reduce sum c_eng
#compute strs all stress/atom

#----------------------Run Minimization-------------------------
timestep 0.01

thermo_style    custom step cpu atoms ke
thermo_modify   lost warn
thermo 100
#thermo_style custom step pe lx ly lz press pxx pyy pzz c_eatoms 

dump     1 all custom 200 ${name}.dump id type mass radius xs ys zs 

#min_style cg
#minimize 1e-15 1e-15 5000 5000

run     10000

print "All done"
